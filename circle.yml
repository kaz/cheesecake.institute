dependencies:
  override:
    - go get -v github.com/gohugoio/hugo

test:
  override:
    - echo ok

deployment:
  master:
    branch: master
    commands:
      - hugo
      - tar zcvf public.tar.gz public
      - scp public.tar.gz deploy@cheesecake.institute:/tmp
      - ssh deploy@cheesecake.institute "tar zxvf /tmp/public.tar.gz -C /tmp && rm -rf /home/deploy/cheesecake && mv /tmp/public /home/deploy/cheesecake && rm /tmp/public.tar.gz"

general:
  artifacts:
    - public.tar.gz
